<Window x:Class="PDVNetEventos.Views.ListarFornecedoresDoEvento"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Fornecedores do Evento" Height="480" Width="820"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <DockPanel>
        <!-- Barra superior -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="10">
            <TextBlock Text="Evento: " FontWeight="Bold" Margin="0,6,4,0"/>
            <TextBlock Text="{Binding EventoNome}" Margin="0,6,12,0"/>

            <TextBlock Text="Gasto/Orçamento/Saldo: " FontWeight="Bold" Margin="12,6,4,0"/>
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0:C} / {1:C} / {2:C}">
                        <Binding Path="Gasto"/>
                        <Binding Path="Orcamento"/>
                        <Binding Path="Saldo"/>
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>

            <Button Content="Atualizar" Margin="12,0,0,0" Width="100" Height="28"
                    Command="{Binding AtualizarCommand}"/>

            <TextBlock Text="Carregando..." Margin="12,6,0,0"
                       Foreground="DarkBlue" FontWeight="Bold"
                       Visibility="{Binding Carregando, Converter={StaticResource BoolToVis}}"/>
        </StackPanel>

        <!-- Grade -->
        <DataGrid ItemsSource="{Binding Itens}"
                  AutoGenerateColumns="False" Margin="10"
                  IsReadOnly="True" CanUserAddRows="False" SelectionMode="Single">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60"/>
                <DataGridTextColumn Header="Serviço" Binding="{Binding NomeServico}" Width="*"/>
                <DataGridTextColumn Header="CNPJ" Binding="{Binding CNPJ}" Width="180"/>
                <DataGridTextColumn Header="Valor Acordado"
                                    Binding="{Binding ValorAcordado, StringFormat=\{0:C\}}"
                                    Width="150"/>
                <DataGridTemplateColumn Header="Ações" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Remover" Padding="8,2"
                                    Command="{Binding DataContext.RemoverVinculoCommand,
                                                      RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>