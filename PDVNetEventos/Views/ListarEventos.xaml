<Window x:Class="PDVNetEventos.Views.ListarEventos"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Eventos" Height="480" Width="920"
        WindowStartupLocation="CenterScreen">

    <!-- Recursos da Janela -->
    <Window.Resources>
        <!-- Conversor padrão do WPF -->
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <DockPanel>
        <!-- Barra superior -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="10">
            <Button Content="Atualizar"
                    Width="110" Height="30"
                    Command="{Binding AtualizarCommand}" />

            <!-- Mostra "Carregando..." se Carregando == true -->
            <TextBlock Text="Carregando..."
                       Margin="10,4,0,0"
                       Foreground="DarkBlue"
                       FontWeight="Bold"
                       Visibility="{Binding Carregando, Converter={StaticResource BoolToVis}}"/>
        </StackPanel>

        <!-- DataGrid -->
        <DataGrid ItemsSource="{Binding Itens}"
                  AutoGenerateColumns="False"
                  Margin="10"
                  IsReadOnly="True"
                  CanUserAddRows="False"
                  SelectionMode="Single">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="*"/>
                <DataGridTextColumn Header="Início"
                                    Binding="{Binding DataInicio, StringFormat=\{0:dd/MM/yyyy\}}"
                                    Width="120"/>
                <DataGridTextColumn Header="Fim"
                                    Binding="{Binding DataFim, StringFormat=\{0:dd/MM/yyyy\}}"
                                    Width="120"/>

                <!-- Inscritos / Capacidade -->
                <DataGridTextColumn Header="Inscritos/Cap." Width="110">
                    <DataGridTextColumn.Binding>
                        <MultiBinding StringFormat="{}{0}/{1}">
                            <Binding Path="Inscritos"/>
                            <Binding Path="Capacidade"/>
                        </MultiBinding>
                    </DataGridTextColumn.Binding>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Gasto"
                                    Binding="{Binding Gasto, StringFormat=\{0:C\}}"
                                    Width="110"/>
                <DataGridTextColumn Header="Orçamento"
                                    Binding="{Binding Orcamento, StringFormat=\{0:C\}}"
                                    Width="110"/>
                <DataGridTextColumn Header="Saldo"
                                    Binding="{Binding Saldo, StringFormat=\{0:C\}}"
                                    Width="110"/>

                <!-- Ações -->
                <DataGridTemplateColumn Header="Ações" Width="280">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,0">
                                <Button Content="Participantes" Padding="8,2" Margin="2,0"
                                        Command="{Binding DataContext.AbrirParticipantesCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                        CommandParameter="{Binding}"/>
                                <Button Content="Fornecedores" Padding="8,2" Margin="2,0"
                                        Command="{Binding DataContext.AbrirFornecedoresCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                        CommandParameter="{Binding}"/>
                                <Button Content="Editar" Padding="8,2" Margin="2,0"
                                        Command="{Binding DataContext.EditarCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                        CommandParameter="{Binding}"/>
                                <Button Content="Excluir" Padding="8,2" Margin="2,0"
                                        Command="{Binding DataContext.ExcluirCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                        CommandParameter="{Binding}"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>